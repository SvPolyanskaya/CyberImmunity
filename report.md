# Робот-фармацевт
Учебный пример для курса по кибериммунной разработке

Учебный пример "Робот-фармацевт"
![image](https://github.com/SvPolyanskaya/CyberImmunity/assets/163770686/dba32d39-8329-461a-8010-7a76d741f667)


- [Постановка задачи](#постановка-задачи)
- [Известные ограничения и вводные условия](#известные-ограничения-и-вводные-условия)
- [Цели и Предположения Безопасности (ЦПБ)](#цели-и-предположения-безопасности-цпб)
- [Архитектура системы](#архитектура-системы)
- [Компоненты](#компоненты)
- [Алгоритм работы решения](#алгоритм-работы-решения)
- [Описание Сценариев (последовательности выполнения операций), при которых ЦБ нарушаются](#описание-сценариев-последовательности-выполнения-операций-при-которых-цб-нарушаются)
- [Указание "доверенных компонент" на архитектурной диаграмме.](#указание-доверенных-компонент-на-архитектурной-диаграмме)
- [Политики безопасности](#политики-безопасности)
## Постановка задачи


Робот-фармацевт

![image](https://github.com/SvPolyanskaya/CyberImmunity/assets/163770686/be1ae8e9-5c97-4155-b25b-92425a7fb39b)


Продукт - робот-фармацевт, который производит лекарство по индивидуальному рецепту.
Рецепт включает в себя

а) точный состав и количество компонентов, порядок и условия изготовления конечного продукта

б) уникальный идентификатор лекарства, который изготавливается в определённом объёме для индивидуального курса лечения


Особенности:

Робот-фармацевт управляется центральной системой по беспроводному интерфейсу
Робот-фармацевт передаёт состояние в центральную систему
Ключевые ценности, ущербы, неприемлемые события
Ценность	Негативное событие	Оценка ущерба	Комментарий
люди	два разрешающих сигнала в пересекающихся направлениях привели к дтп с пострадавшими	высокий	
скорость движения	из-за неправильной работы светофора образовалась пробка	средний	можно вызвать человека-регулировщика
Контекст

 
Краткое описание назначения и применения продукта
Продукт - робот-фармацевт, который производит лекарство по индивидуальному рецепту.
Рецепт включает в себя

а) точный состав и количество компонентов, порядок и условия изготовления конечного продукта
б) уникальный идентификатор лекарства, который изготавливается в определённом объёме для индивидуального курса лечения

Ценности продукта и негативные события в их отношении
	Ценность	Негативное событие	Величина ущерба	Комментарий
	
Лекарство	
Нарушение технологического процесса	
Высокий	
возможно причинение вреда здоровью клиентов
	


Рецептура	


Неавторизованный доступ к рецептуре (раскрытие торгового секрета)	


Высокий	
конкуренты смогут производить аналоги

PR риски из-за публикации рецептуры (критично для дорогостоящих БАДов и прочей гомеопатии)
	


Персональные данные	


Неавторизованный доступ к персональным данным клиентов	


Высокий	


оборотный штраф для организации
	


Робот	


невозможность производства лекарства из-за отказа оборудования	


Средний	

при необходимости сотрудник фармацевт сможет вручную приготовить небольшие партии лекарств
	


Люди	


отравление из-за приёма неправильного лекарства	


Высокий	


возможно причинение вреда здоровью клиентов
 

 

 
Роли пользователей
Оператор-фармацевт - вводит задание на производство и получает лекарство для передачи клиенту Пациент - получает рецепт от врача в клинике и по этому рецепту получает лекарство в аптеке

Контекст работы системы
См. вкладку "Контекст"




Верхнеуровневые сценарии (режимы) работы продукта
См. вкладку "Сценарий перевозки"
2. Сценарий генерации событий
![Сценарий генерации событий](https://github.com/SvPolyanskaya/CyberImmunity/blob/Robot-in-Pharmacy/Robot%20pharmacy%20базовый%20сценарий.png))
 
Вариант 1. Лекарства общего назначения
Не предполагает льготного получения, не является наркотиком, не предполагает существенных ограничений для клиентов.
Однако лекарство может быть очень дорогим или с очень коротким сроком годности, поэтому клиенту важно получить свежее лекарство в минимально достаточной дозировке





 
 

Упрощение
Чтобы не отвлекаться на систему управления складскими запасами предположим, что это реализовано на уровне аптечной сети - только тем роботам будет передано задание на производство, которые располагают достаточным запасом субстанций
 
задание на
производство для конкретного робота-фармацевта


Робот-фармацевт
 


запрос рецепта рецепт
 





База данных рецептов
 
Вариант 2. Лекарства из специального списка
варианты
-	входит в список жизненно-необходимых, производство полностью или частично оплачивается государством

-	содержит наркотические вещества или прекурсоры для их получения, авторизованное получение такого лекарства должно строго контролироваться
-	всё остальное из варианта 1.


задание на производство для конкретного
робота-фармацевта


 

Робот-фармацевт
 

запрос рецепта рецепт
 
База данных рецептов
 

 
 

 
 
 









 
Описание компонентов
1. Связь	отвечает за взаимодействие с системой распределения задач на изготовление и с базой данных рецептов	получает полный рецепт или его идентификатор
2. Измерение параметров субстанций	
контролирует массу и/или объём компонентов	
3. Центральная система управления	осуществляет общее управление процессом приготовления лекарства	
4. Самодиагностика	осуществляет сбор и анализ телеметрии всех подсистем для оценки работоспособности системы	
5. Перемещение компонентов	отвечает за расчёт траекторий перемещения робота на каждом этапе тех. процесса	

6. Перемешивание	
осуществляет комплекс действий для достижения требуемого уровня смешения компонентов	используется в том числе для подготовки промежуточных ёмкостей

7. Маркировка	
изготавливает и наклеивает на ёмкость описание лекарства	

8. Стерилизация	
осуществляет комплекс действий по стерилизации ёмкости с лекарством	
включает контроль качества стерилизации
9. Нагрев/охлаждение	обеспечивает требуемые по тех. процессу температурные условия для химических реакций	
10. Приводы	управляют захватами робота для реализации рассчитанных траекторий и механических воздействий на субстанции (в т.ч. измельчение и перемешивание)	
		
 
 
 
Основные этапы процесса изготовления лекарства по рецепту








 















 
 
Цели безопасности
1. Выполняются только аутентичные задания на производство




Предположения безопасности
- "доктор плохого не посоветует" - врачи, выписывающие рецепты, благонадёжны
 


 
Анализ векторов атак и эффекта (упражнение)


1. Связь	отвечает за взаимодействие с системой распределения задач на изготовление
и с базой данных рецептов	

в результате компрометации произошла подмена задания на производство

2. Измерение параметров субстанций	

контролирует массу и/или объём компонентов	

3. Центральная система управления	
осуществляет общее управление процессом приготовления лекарства	


4. Самодиагностика	
осуществляет сбор и анализ телеметрии всех подсистем для оценки работоспособности системы	

5. Перемещение компонентов	
отвечает за расчёт траекторий перемещения робота на каждом этапе тех. процесса	


6. Перемешивание	
осуществляет комплекс действий для достижения требуемого уровня смешения компонентов	


7. Маркировка	
изготавливает и наклеивает на ёмкость описание лекарства	


8. Стерилизация	
осуществляет комплекс действий по стерилизации ёмкости с лекарством	


9. Нагрев/охлаждение	
обеспечивает требуемые по тех. процессу температурные условия для химических реакций	


10. Приводы	управляют захватами робота для реализации рассчитанных траекторий и механических воздействий на субстанции (в т.ч. измельчение и перемешивание)	
		
 
 
 
Упражнение
используя пример по ссылке, изобразите развитие атаки через другие скомпрометированные компоненты (по одному в сценарии)
3.	Центральная система управления

4.	Самодиагностика
5.	Стерилизация

6.	Перемещение компонентов
2. Измерение параметров субстанций
10. Приводы

6.	Перемешивание
9. Нагрев/охлаждение
7.	Маркировка
Если в результате развития атаки можно нарушить какую-либо ЦБ, то компонент обязан стать частью доверенной кодовой базы, если нет, то его следует рассматривать как недоверенный код.
Результаты пришлите в виде ссылки на диаграмму в чат с указанием атакуемого компонента и его уровня доверия (доверенный/недоверенный).





https://kas.pr/92x2
 
Цели безопасности
1.	Выполняются только аутентичные задания на производство

2.	Для производства используются только авторизованные вещества

3.	Продукт имеет аутентичную маркировку










Предположения безопасности
- "доктор плохого не посоветует" - врачи, выписывающие рецепты, благонадёжны
 
Политика архитектуры


Легенда
недоверенная сущность


доверенная сущность


доверенная сущность,
повышающая целостность данных

высокоцелостные данные


низкоцелостные данные














Качественные оценки доменов
Сложность - S (simple), M(medium), C (complex) - простой, средней сложности, сложный
Размер (объём) кода - S, M, L, XL - маленький, среднего размера, большой, очень большой
- простой и маленький
 
Таблица 1. Обоснование уровня доверия доменов безопасности

Домен безопасности	
Уровень доверия	
Обоснование	
Комментарий

1. Связь	
недоверенный		

2. Измерение параметров субстанций	
недоверенный		

3. Центральная система управления	
недоверенный		

4. Самодиагностика	
недоверенный		

5. Перемещение компонентов	
недоверенный		

6. Перемешивание	
недоверенный		

7. Маркировка	
недоверенный		

8. Стерилизация	
недоверенный		

9. Нагрев/охлаждение	
недоверенный		

10. Приводы	
недоверенный		
			
 

 
Домашнее задание: переработка политики архитектуры
Критерии хорошей политики архитектуры:

-	минимизировать размер и сложность TCB под заданные ЦПБ 1-3
-	обоснование уровня доверия приведено в таблице 1.
-	минимальное количество интерфейсов у доверенных компонентов

Другими словами
-	каждый доверенный домен безопасности, особенно "жёлтый", нужно стремиться делать простым и маленьким, количество входящих стрелок следует стремиться сделать минимальным

Что можно сделать
-	декомпозировать существующие домены безопасности
-	добавить новые домены безопасности, обеспечивающие достижение ЦБ при уменьшении размера довереной кодовой базы
-	следует заполнить таблицу 2 на следующей вкладке с описанием новых доменов безопасности и заполнить таблицу 3 с обоснованием выбора уровня доверия

